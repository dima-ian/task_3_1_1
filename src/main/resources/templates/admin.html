<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>

	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

	<title>Users CRUD</title>
</head>

<body>
<div class="container">

<h2>Users</h2><br/>

<table class="table table-bordered table-striped">
	<thead class="thead-dark">
	<tr>
		<th>Name</th>
		<th>Login</th>
		<th>Password</th>
		<th>Role</th>
		<th>Delete</th>
		<th>Edit</th>
	</tr>
	<th:block th:each="user : ${users}">
		<th:block th:each="role : ${user.roles}">
			<tr>
				<td th:text="${user.name}"></td>
				<td th:text="${user.login}"></td>
				<td th:text="${user.password}"></td>
				<td th:text="${role.role}"></td>

				<td><a th:href="@{/admin/delete(userId=${user.id})}"
					   class="btn btn-info btn-sm"
					   onclick="if (!(confirm('Are you sure you want to delete this empler ?'))) return false"> Delete</a></td>

				<td><a th:href=" @{admin/edit(userId=${user.id})}" class="btn btn-info btn-sm">Edit</a></td>
			</tr>
		</th:block>
	</th:block>


	<form th:action="@{/admin/add}" method="POST">
		<tr>
			<td>Create new user</td>
			<td>
				Name <input type="text" th:field="*{user.name}"/>
			</td>
			<td>
				Login <input type="text" th:field="*{user.login}"/>
			</td>
			<td>
				Password <input type="text" th:field="*{user.password}"/>
			</td>
			<td> Role
				<select th:name="roleId">
					<option th:each="role : ${roles}"
							th:value="${role.getId()}"
							th:text="${role.role}">
					</option>
				</select>
			</td>
			<td>
				<button type="submit">Submit</button>
			</td>
		</tr>
	</form>
</table>
<form th:action="@{/logout}" method="POST">
	<input type="submit" value="Logout"/>
</form>

</div>
	
</body>
</html>



